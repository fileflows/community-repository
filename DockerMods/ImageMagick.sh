# ----------------------------------------------------------------------------------------------------
# Name: ImageMagick
# Description: ImageMagick, invoked from the command line as magick, is a free and open-source cross-platform software suite for displaying, creating, converting, modifying, and editing raster images.
# Author: reven
# Revision: 5
# Icon: data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjQ4IiB2aWV3Qm94PSIwIDAgNDggNDgiIHdpZHRoPSI0OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9Ii05MC4wODIyODEiIHgyPSItOTAuMDgyMjgxIiB5MT0iMTA0NS40ODY1OTYiIHkyPSIxMDAyLjU5NTQzOCI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMDBhYWQ0Ii8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMmFkNGZmIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMjMuMjMzNTEiIHgyPSIyMy4xMDcyMzkiIHkxPSIxMDM5LjQ4Mjc1NSIgeTI9IjEwMTUuNjE3OTAxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMyZDJkMmQiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMzYzNjM2MiLz48L2xpbmVhckdyYWRpZW50PjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTEwMDQuMzYyMikiPjxyZWN0IGZpbGw9IiMwMDY2ODAiIGhlaWdodD0iNDMuMzIxNjE3IiByeD0iMy45MzgzMjkiIHRyYW5zZm9ybT0ibWF0cml4KC45OTM4Nzk1OCAtLjExMDQ2ODkyIC4xMTA0Njg5MiAuOTkzODc5NTggMCAwKSIgd2lkdGg9IjQzLjMyMTYxNyIgeD0iLTExMS40ODU3MiIgeT0iMTAwMy41NDI1Ii8+PHJlY3QgZmlsbD0idXJsKCNhKSIgaGVpZ2h0PSI0My4zMjE2MTciIHJ4PSIzLjkzODMyOSIgdHJhbnNmb3JtPSJtYXRyaXgoLjk5Mzg3OTU4IC0uMTEwNDY4OTIgLjExMDQ2ODkyIC45OTM4Nzk1OCAwIDApIiB3aWR0aD0iNDMuMzIxNjE3IiB4PSItMTExLjQ4NTcyIiB5PSIxMDAyLjU1NzciLz48ZyBmaWxsPSJub25lIj48cGF0aCBkPSJtMjIuNjU1NzMgMTAyNC4wNjk1IDIuNjU2LS4xNDEgMS40MDYtMi4xMTMuOTY1IDIuNDEgMi41NTkuOTE0LTEuOTczIDEuNTc0LS4wNDMgMi41NTUtMi4wOTQtMS4zNC0yLjgwMS45MDIuNzg1LTIuNDc3bS0xLjQ2MS0yLjI4NSIvPjxwYXRoIGQ9Im0yMi4yNTc3MyAxMDMxLjc1MjUgMi40OTYtLjkxOC43MTUtMi40MzggMS42MzMgMi4wMSAyLjcxNS4xMTctMS40MTQgMi4wODYuNzE1IDIuNDUzLTIuMzk1LS42NTYtMi40MDYgMS42OTEuMDE2LTIuNTk4bS0yLjA3NC0xLjc0NiIvPjxwYXRoIGQ9Im0xNS43OTY3MyAxMDI4LjUyMjUgMi42NTIuMTk5IDEuNjYtMS45MjIuNjUyIDIuNTEyIDIuNDIyIDEuMjM0LTIuMTU2IDEuMzA5LS4zNjcgMi41MjctMS45MDItMS41OS0yLjg5NS41MzkgMS4wOS0yLjM1NW0tMS4xNTYtMi40NTMiLz48L2c+PHBhdGggZD0ibTI2LjcyOTczIDEwMTUuNzAyNWMtMi40OC4zMi01LjE0NSAxLjUyNy03LjMxMyA1LjA5OC00Ljk1NyA4LjE2LTQuNjA1IDExLTUuMzk1IDExLjkxOC0uNzkzLjkxNC0yLjkzIDEuNDEtMi42MjEgMi40NDkuMzA5IDEuMDM1LjYyMS45MDIuNjIxLjkwMnMzLjEyMSA0LjUyIDEyLjE3MiAzLjM0OGM5LjA1LTEuMTcyIDEwLjMwNS0zLjA4MiAxMC4yMjMtNC4wMy0uMDgyLS45NDktMS45OTItMS42NDEtMS45OTItMS42NDFzLTEuNDE0LTQuOTg0LTEuMDUxLTcuMDNjLjM2My0yLjA0NyAxLjc0Mi01LjAzIDMuMTA1LTUuNjcyIDEuMzU5LS42NDggMi4wMzkgMi4xNjggMi43NDIgMS40NzMuNjk5LS42OTUtMS4xOC02LjA2LTMuMjU4LTYuMTAyLTEuMTY0LS4wMjMtNC4wNTktMS4xMjEtNy4yMzQtLjcwN20uMDA4IDYuODQ4LjY5MSAyLjA0MyAyLjA5OC41OTQtMS43NzMgMS4yNjIuMDc4IDIuMTQ1LTEuNzczLTEuMjYyLTIuMDkuNzMuNjcyLTIuMDItMS4zNDgtMS42OTUgMi4yMDMtLjAybS01Ljg0IDQuMjI3LjA3NCAxLjQ4IDEuMzI0Ljc5My0xLjQzLjUxNi0uMzU5IDEuNDY1LS45NzMtMS4xNDEtMS41MjMuMDk4LjgxNi0xLjIzNC0uNTgyLTEuMzg3IDEuNDc3LjM4M203LjA4Mi0uNjY0IDEuNDE4IDEuODk4IDIuMzk1LS4wOTQtMS4zOTEgMS45MjIuODE2IDIuMTg4LTIuMjk3LS43MTEtMS44ODcgMS40NTctLjAxNi0yLjM1OS0xLjk4OC0xLjI5NyAyLjI3Ny0uNzQ2bS42NzItMi4yNTgiIGZpbGw9InVybCgjYikiLz48L2c+PC9zdmc+
# ----------------------------------------------------------------------------------------------------

#!/bin/bash

# Function to handle errors
function handle_error {
    echo "An error occurred. Exiting..."
    exit 1
}

# Check if the --uninstall option is provided
if [ "$1" == "--uninstall" ]; then
    echo "Uninstalling ImageMagick..."
    if apt-get remove -y imagemagick; then
        echo "ImageMagick successfully uninstalled."
        exit 0
    else
        handle_error
    fi
fi

# Check if ImageMagick is installed
if command -v convert &>/dev/null; then
    echo "ImageMagick is already installed."
    exit 0
fi

echo "ImageMagick is not installed. Installing..."

# Update package lists and install ImageMagick
if ! apt-get -qq update || ! apt-get install -yqq imagemagick; then
    handle_error
fi

# Verify installation
if command -v convert &>/dev/null; then
    echo "ImageMagick successfully installed."
    exit 0
fi

echo "Failed to install ImageMagick."
exit 1
